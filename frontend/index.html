<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>ShopSmart — Home</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Header -->
  <div id="header-root"></div>
  <script>fetch("components/header.html").then(r=>r.text()).then(h=>document.getElementById("header-root").innerHTML=h);</script>

  <!-- Search + Sort Section -->
  <section class="home-search-sort">
    <input type="text" id="homeSearch" placeholder="Search for products..." />
    <select id="sortBy">
      <option value="newest">Sort By: Newest</option>
      <option value="low">Price: Low to High</option>
      <option value="high">Price: High to Low</option>
    </select>
    <button id="searchBtn">Search</button>
  </section>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <div>
        <h1>Deals of the Day — Best prices, fast delivery</h1>
        <p>Handpicked electronics, fashion, and accessories</p>
        <a class="cta" href="products.html">Shop Now</a>
      </div>
      <img src="assets/images/hero.jpg" alt="hero" class="hero-img"/>
    </div>
  </section>

  <!-- Categories -->
  <section class="categories">
    <h2>Shop by Category</h2>
    <div class="category-grid" id="categoryGrid"></div>
  </section>

  <!-- Featured -->
  <section class="featured">
    <h2>Featured Products</h2>
    <div id="featuredGrid" class="product-grid"></div>
  </section>

  <div id="toast-container"></div>

  <script src="js/main.js"></script>
</body>

<style>
body{margin:0;font-family:Poppins,system-ui;background:#071021;color:#e6eef8;}
.hero{padding:48px 6%;background:linear-gradient(90deg,#071021,#081827,#072034);border-bottom:1px solid rgba(255,255,255,0.02);}
.hero-inner{display:flex;align-items:center;gap:30px;justify-content:space-between;max-width:1200px;margin:0 auto;}
.hero h1{font-size:1.9rem;color:#fff;margin:0 0 8px;}
.hero p{color:#b6c8d8;margin:0 0 18px;}
.cta{background:#00b4db;color:#02121a;padding:10px 16px;border-radius:10px;text-decoration:none;font-weight:600;}
.hero-img{width:320px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);}

/* ✅ Search + Sort */
.home-search-sort {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:12px;
  padding:18px;
  background:#0b1220;
  box-shadow:0 4px 12px rgba(0,0,0,0.4);
}
#homeSearch {
  width:300px;
  padding:10px;
  border:none;
  border-radius:6px;
  background:#0e1a2b;
  color:#fff;
}
#sortBy {
  padding:10px;
  border-radius:6px;
  border:none;
  background:#00b4db;
  color:#02121a;
}
#searchBtn {
  padding:10px 16px;
  border:none;
  border-radius:6px;
  background:#00e0a8;
  color:#02121a;
  font-weight:600;
  cursor:pointer;
}
#searchBtn:hover { background:#00f0c0; }

/* ✅ Categories & Featured */
.categories, .featured {
  max-width:1200px;
  margin:40px auto;
  padding:20px;
}
.categories h2, .featured h2 {
  font-size:1.8rem;
  font-weight:700;
  margin-bottom:18px;
  background:linear-gradient(90deg,#00b4db,#00e0a8);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 10px rgba(0,224,168,0.25);
  letter-spacing:0.5px;
}
.category-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:18px;
}
.cat-card {
  background:linear-gradient(180deg,#071827,#092338);
  padding:18px;
  border-radius:12px;
  text-align:center;
  cursor:pointer;
  border:1px solid rgba(255,255,255,0.05);
  transition:transform 0.2s, box-shadow 0.3s;
}
.cat-card:hover {
  transform:translateY(-4px);
  box-shadow:0 6px 20px rgba(0,224,168,0.2);
}
.cat-card img {
  width:100%;
  height:110px;
  object-fit:cover;
  border-radius:8px;
  margin-bottom:10px;
}
.product-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:18px;
}
.product-card {
  background:linear-gradient(180deg,#071827,#082133);
  border-radius:12px;
  padding:14px;
  text-align:center;
  border:1px solid rgba(255,255,255,0.05);
}
.product-card img {
  width:100%;
  height:140px;
  object-fit:contain;
  border-radius:8px;
}
.p-title{font-size:15px;margin:10px 0 6px;}
.p-price{color:#00e0a8;font-weight:700;margin-bottom:8px;}
</style>

<script>
const API = "http://127.0.0.1:5000/api";

document.addEventListener("DOMContentLoaded", () => {
  const searchBtn = document.getElementById("searchBtn");
  const searchInput = document.getElementById("homeSearch");
  const sortBy = document.getElementById("sortBy");

  // ✅ Search Redirect
  searchBtn.addEventListener("click", () => {
    const q = searchInput.value.trim();
    const sort = sortBy.value;
    if (!q) return showToast("Enter a product name", true);
    window.location.href = `products.html?q=${encodeURIComponent(q)}&sort=${sort}`;
  });

  searchInput.addEventListener("keydown", e => {
    if (e.key === "Enter") searchBtn.click();
  });
});
</script>
</html>
